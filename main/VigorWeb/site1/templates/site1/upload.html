{% extends 'site1/base.html' %}
{% load static %}
{% block upload %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload Image</title>
    <link rel="stylesheet" href="{% static 'site1/css/upload.css' %}">
</head>
<body>
    <h1 class="upload-title">Nhận diện ảnh</h1>
    <form action="{% url 'upload' %}" method="post" enctype="multipart/form-data" class="upload-form">
        {% csrf_token %}
        <div class="form-container">
            <div class="file-input-wrapper">
                <label for="file-upload" class="file-label">Chọn ảnh</label>
                <input type="file" id="file-upload" name="image" accept="image/*" class="file-input" onchange="previewImage(event)">
            </div>
            <button type="submit" class="submit-button">Nhận diện</button>
        </div>
    </form>

    <!-- Section to display the uploaded image -->
    <div id="image-preview" class="image-preview">
        <img id="preview" class="preview-image" src="#" alt="Image preview" style="display: none;">
    </div>

    {% if labels %}
        <h3 class="result-title">Nội dung trong ảnh là:</h3>
        <ul class="result-list">
            {% for label in labels %}
                <li class="result-item">{{ label }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <script>
        function previewImage(event) {
            var reader = new FileReader();
            reader.onload = function(){
                var output = document.getElementById('preview');
                output.src = reader.result;
                output.style.display = 'block';
            }
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
</body>
</html>
{% endblock upload %}
